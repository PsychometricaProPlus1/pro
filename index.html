<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Psychometrica Pro Plus V9</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Noto+Sans+Devanagari&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-brain"></i> Psychometrica Pro Plus V9</h1>
            <button id="logout-btn" class="logout-button hidden" onclick="confirmLogout()"><i class="fas fa-sign-out-alt"></i> Logout</button>
        </header>

        <section id="login-section">
             <h2>Login</h2>
             <div class="form-group"> <label for="username">Username:</label> <input type="text" id="username" required> </div>
             <div class="form-group"> <label for="password">Password:</label> <input type="password" id="password" required> </div>
             <button onclick="login()">Login</button>
        </section>

        <section id="standard-selection" class="hidden">
             <h2>Select Grade (इयत्ता निवडा)</h2>
            <div class="form-group">
                <label for="standard">Select Grade:</label>
                <select id="standard"> <option value="">-- Select Grade --</option> <option value="5">5th</option> <option value="6">6th</option> <option value="7">7th</option> <option value="8">8th</option> <option value="9">9th</option> <option value="10">10th</option> </select>
            </div>
            <button onclick="showLanguageSelection()">Next</button>
        </section>

        <section id="language-selection" class="hidden">
            <h2>Select Language (भाषा निवडा)</h2>
            <div class="language-options"> <button onclick="startTest('english')">English</button> <button onclick="startTest('marathi')">मराठी</button> </div>
            <button onclick="goBack('language-selection')">Back</button>
        </section>

        <section id="info-section" class="hidden">
             <h2>Student Information (विद्यार्थ्याची माहिती)</h2>
            <div id="info-step"> </div>
            <div class="button-group"> <button id="info-back-btn" onclick="previousInfoStep()" style="display: none;">Back</button> <button id="info-next-btn" onclick="nextInfoStep()">Next</button> <button onclick="goBack('info-section')">Back to Language</button> </div>
        </section>


        <section id="instructions-section" class="hidden">
             <h2>Instructions (सूचना)</h2>
            <div id="instructions-content"> </div>
            <div class="button-group"> <button onclick="goBack('instructions-section')">Back</button> <button onclick="showTest()">Start Test</button> </div>
        </section>

        <section id="test-section" class="hidden">
             <h2>Psychometric Test</h2>
            <div class="progress-bar"> <div id="progress-fill"></div> <div id="progress-text">Question 1 of X</div> </div>
            <div id="questions"> </div>
            <div class="button-group"> <button id="back-btn" onclick="previousQuestion()" style="display: none;">Back</button> <button id="next-btn" onclick="nextQuestion()">Next</button> <button id="submit-btn" onclick="submitTest()" style="display: none;">Submit</button> </div>
        </section>

        <section id="results-section" class="hidden">
             <h2>Test Results</h2>
            <div id="trophy-sign" class="trophy-sign hidden"><i class="fas fa-trophy"></i> Well Done!</div>
            <div id="result-content"> </div>
            <div class="contact-message"> <p>For detailed discussion and counseling regarding your child's progress plan, please contact [Client Name] at [Client Phone]. Share your result with admin now for further processing.</p> </div>
            <div class="button-group"> <button onclick="shareOnWhatsApp()"><i class="fab fa-whatsapp"></i> Share</button> <button onclick="copyResultCode()"><i class="fas fa-copy"></i> Copy Result</button> <button onclick="downloadCertificate()"><i class="fas fa-certificate"></i> Download Certificate</button> <button onclick="resetUI()">Finish</button> </div>
        </section>

        <section id="admin-section" class="hidden">
            <h2>Admin Dashboard</h2>

            <div class="admin-subsection">
                <h3><i class="fas fa-user-plus"></i> Add Student Information</h3>
                 <div class="student-info-form">
                     <div class="form-group"> <label for="info-student-name">Student Name:</label> <input type="text" id="info-student-name"> </div>
                     <div class="form-group"> <label for="info-parent-name">Parent Name:</label> <input type="text" id="info-parent-name"> </div>
                     <div class="form-group"> <label for="info-mobile">Mobile:</label> <input type="tel" id="info-mobile"> </div>
                     <div class="form-group"> <label for="info-email">Email:</label> <input type="email" id="info-email"> </div>
                     <div class="form-group"> <label for="info-school">School:</label> <input type="text" id="info-school"> </div>
                     <div class="form-group"> <label for="info-age">Age:</label> <input type="number" id="info-age" min="5" max="25"> </div>
                     <div class="form-group"> <label for="info-board">Board:</label> <select id="info-board"> <option value="">Select Board</option> <option value="SSC">SSC</option> <option value="CBSE">CBSE</option> <option value="ICSE">ICSE</option> <option value="IB">IB</option> <option value="IGCSE">IGCSE</option> </select> </div>
                     <div class="form-group"> <label for="info-standard">Standard/Grade:</label> <select id="info-standard"> <option value="">Select Grade</option> <option value="5">5th</option> <option value="6">6th</option> <option value="7">7th</option> <option value="8">8th</option> <option value="9">9th</option> <option value="10">10th</option> </select> </div>
                     <div class="form-group"> <label for="info-medium">Medium:</label> <select id="info-medium"> <option value="">Select Medium</option> <option value="English">English</option> <option value="Marathi">Marathi</option> </select> </div>
                     <button onclick="submitStudentInfo()">Submit Student Info</button>
                 </div>
            </div>

            <div class="admin-subsection">
                 <h3><i class="fas fa-users"></i> Submitted Student Information (Local)</h3>
                <div class="table-container"> <table id="student-info-table"> <thead> <tr> <th>Student Name</th> <th>Parent Name</th> <th>Mobile</th> <th>Email</th> <th>School</th> <th>Age</th> <th>Board</th> <th>Standard</th> <th>Medium</th> </tr> </thead> <tbody> </tbody> </table> </div>
                <div class="button-group"> <button onclick="exportStudentInfoToCSV()"><i class="fas fa-file-csv"></i> Export Student Info to CSV</button> <button class="danger-button" onclick="clearStudentInfo()"><i class="fas fa-trash-alt"></i> Clear Student Info (Local)</button> </div>
            </div>

            <div class="admin-subsection">
                <h3><i class="fas fa-poll"></i> Test Results (Local)</h3>
                <div class="table-container"> <div id="admin-content"> <table id="results-table"><thead><tr><th>Name</th><th>Grade</th><th>Date</th><th>Summary</th></tr></thead><tbody></tbody></table> </div> </div>
                <div class="button-group"> <button onclick="exportAllToExcel()"><i class="fas fa-file-excel"></i> Export Results to CSV</button> <button class="danger-button" onclick="clearReports()"><i class="fas fa-trash-alt"></i> Clear Test Results (Local)</button> </div>
            </div>

             <div class="admin-subsection admin-form">
                <h3><i class="fas fa-tasks"></i> Generate Student Development Plan</h3>
                 <div class="form-group">
                     <label for="plan-student-name">Student's Name:</label>
                     <input type="text" id="plan-student-name" placeholder="Enter student's name" aria-label="Student's Name" required>
                 </div>
                 <div class="form-group">
                     <label for="plan-age">Age:</label>
                     <input type="number" id="plan-age" placeholder="Enter age" min="10" max="18" aria-label="Age" required>
                 </div>
                 <div class="form-group">
                     <label for="plan-standard">Standard:</label>
                     <select id="plan-standard" aria-label="Select Grade" required>
                         <option value="">Select Grade</option>
                         <option value="5">5th</option> <option value="6">6th</option> <option value="7">7th</option>
                         <option value="8">8th</option> <option value="9">9th</option> <option value="10">10th</option>
                     </select>
                 </div>
                 <div class="form-group">
                     <label for="plan-score">Score (%):</label>
                     <input type="number" id="plan-score" placeholder="Enter score (0-100)" min="0" max="100" aria-label="Score" required>
                 </div>
                 <div class="button-group" style="justify-content: flex-start; margin-bottom: 15px;">
                    <button onclick="generateDevelopmentPlan()"><i class="fas fa-cogs"></i> Generate Plan</button>
                </div>

                <div id="development-plan-section" class="hidden">
                    <div id="plan-content">
                        <h4 style="margin-bottom: 10px;">Generated Plan:</h4>
                        <div id="plan-text" style="white-space: pre-wrap; text-align: left; padding: 10px; border: 1px solid #ccc; border-radius: 8px; background-color: #f9f9f9;">
                             </div>
                    </div>
                    <div class="button-group" style="justify-content: flex-start; margin-top: 15px;">
                        <button onclick="copyPlan()"><i class="fas fa-copy"></i> Copy Plan</button>
                    </div>
                </div>
            </div>
        </section>

    </div> <script src="questions.js"></script>
    <script src="results.js"></script>
    <script src="script.js"></script> </html>
